<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iNTRUDER v2.7 - Finalized HUD</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --bg-dark: #000000; --bg-medium: #111111; --bg-light: #1a1a1a; --primary: #00ffff;
            --secondary: #00ff41; --danger: #ff0055; --warning: #ffaa00; --text-light: #00ff00;
            --text-dark: #ff00ff; --neon-blue: #00ddff; --neon-green: #00ff41; --neon-pink: #ff0080;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-dark);
            background-image: url('/static/background.gif');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            min-height: 100vh;
        }

        @media (max-width: 768px) {
            body { flex-direction: column; }
            .sidebar {
                width: 100%;
                height: auto;
                position: static;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-around;
                padding: 10px;
            }
            .main-content {
                margin-left: 0;
                padding: 10px;
                height: auto;
            }
            .metrics-row, .control-grid {
                grid-template-columns: 1fr 1fr;
                gap: 10px;
            }
            .table-container {
                overflow-x: auto;
            }
            table {
                min-width: 600px;
            }
        }

        @media (min-width: 769px) {
            body { flex-direction: row; }
            .sidebar {
                width: 280px;
                height: 100vh;
                position: fixed;
            }
            .main-content {
                margin-left: 280px;
                flex-grow: 1;
                height: 100vh;
                overflow-y: auto;
            }
        }

        .matrix-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.05; pointer-events: none; }

        .sidebar {
            background: var(--bg-dark);
            border-right: 2px solid var(--primary);
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.2);
        }

        .logo h1 {
            color: var(--primary);
            text-shadow: 0 0 15px var(--primary);
            animation: logoGlow 3s ease-in-out infinite alternate;
            font-size: 1.8rem;
        }

        @keyframes logoGlow {
            from { text-shadow: 0 0 15px var(--primary); }
            to { text-shadow: 0 0 25px var(--primary), 0 0 40px var(--primary); }
        }

        .top-gif-placeholder, .bottom-gif-placeholder, .sidebar-gif {
            width: 100%;
            border-radius: 8px;
            object-fit: cover;
        }

        .top-gif-placeholder {
            height: 120px;
            animation: pulse 2s infinite;
        }

        .main-content { padding: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--primary); padding-bottom: 15px; margin-bottom: 20px; }
        .header-title { color: var(--primary); }
        .scan-indicator { display: none; color: var(--warning); font-size: 14px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }

        .metrics-row, .control-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .metric-card { background: linear-gradient(135deg, var(--bg-light) 0%, rgba(26, 26, 26, 0.8) 100%); border: 1px solid var(--primary); border-radius: 8px; padding: 20px; position: relative; overflow: hidden; transition: all 0.3s ease; }
        .metric-card:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2); }
        .metric-label { color: var(--text-dark); font-size: 12px; margin-bottom: 5px; }
        .metric-value { color: var(--primary); font-size: 32px; font-weight: bold; text-shadow: 0 0 10px currentColor; }
        
        .metric-card-gif {
            padding: 5px;
        }
        .metric-card-gif img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 4px;
        }

        .control-grid { background: var(--bg-medium); border-radius: 8px; padding: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; }
        select, button, input { background: var(--bg-dark); color: var(--primary); border: 1px solid var(--primary); padding: 10px; border-radius: 5px; cursor: pointer; width: 100%; font-size: 14px; transition: all 0.2s ease; }
        button:hover { background: var(--primary); color: var(--bg-dark); box-shadow: 0 0 10px var(--primary); }
        button:disabled { background: #333; color: #777; border-color: #555; cursor: not-allowed; }
        button.active { background: var(--secondary); color: var(--bg-dark); border-color: var(--secondary); }

        .section { margin-bottom: 20px; }
        .section-title { color: var(--primary); margin-bottom: 15px; font-size: 18px; }
        .table-container { max-height: 250px; overflow-y: auto; border: 1px solid var(--primary); border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid rgba(0, 255, 255, 0.2); }
        th { color: var(--primary); background: rgba(0, 255, 255, 0.1); position: sticky; top: 0; backdrop-filter: blur(5px); }
        tr:hover { background: rgba(0, 255, 255, 0.05); }

        #assistantPanel { background: var(--bg-dark); border: 1px solid var(--primary); border-radius: 8px; padding: 15px; display: flex; flex-direction: column; gap: 10px; order: 3; }
        
        .assistant-header { 
            display: flex; 
            align-items: center; 
            gap: 15px;
        }
        .avatar-container {
            width: 80px;
            height: 80px;
            flex-shrink: 0;
        }
        #assistantAvatar {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }
        
        #assistantName { color: var(--primary); font-weight: bold; font-size: 18px; text-shadow: 0 0 5px var(--primary); }
        #assistantStatus { font-size: 12px; color: var(--text-dark); font-style: italic; }
        #assistantLog { height: 100px; background: #000; border-radius: 5px; padding: 8px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 11px; border: 1px solid #333; }
        .assistant-line { margin-bottom: 5px; }
        .assistant-line.suggestion { color: var(--neon-green); }
        .assistant-line.warning { color: var(--warning); }
        .assistant-line.info { color: var(--text-light); }

        .terminal-section { height: 200px; background: #000; padding: 10px; border-radius: 5px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 13px; border: 1px solid var(--secondary); }

        .bottom-gif-placeholder {
            height: 100px;
            animation: pulse 2s infinite reverse;
        }

        .logo { order: 1; }
        .top-gif-placeholder { order: 1.5; }
        .metric-card { order: 2; }
        #assistantPanel { order: 3; }
        .bottom-gif-placeholder { order: 4; }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); }
        .modal-content { background: var(--bg-light); margin: 15% auto; padding: 20px; border: 1px solid var(--primary); width: 80%; max-width: 500px; border-radius: 8px; box-shadow: 0 0 30px rgba(0, 255, 255, 0.2); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .modal-header h2 { color: var(--primary); }
        .close-modal { color: var(--text-dark); font-size: 28px; font-weight: bold; cursor: pointer; }
        .close-modal:hover, .close-modal:focus { color: var(--primary); text-decoration: none; cursor: pointer; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; color: var(--primary); }

        .network-viz-container {
            position: relative;
            height: 350px;
            overflow: hidden;
            border-radius: 8px;
            background: radial-gradient(circle at center, rgba(0, 255, 255, 0.05) 0%, black 70%);
            border: 2px solid var(--primary);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1);
        }
        .network-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            cursor: crosshair;
        }
        .hud-scanline { position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: linear-gradient(90deg, transparent, var(--primary), transparent); animation: scanline 2.5s linear infinite; }
        @keyframes scanline { 0% { top: 0; opacity: 1; } 100% { top: 100%; opacity: 0; } }
        .hud-grid { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px); background-size: 20px 20px; opacity: 0.3; }

        #networkTooltip {
            display: none;
            position: fixed;
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid var(--primary);
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            z-index: 1001;
            pointer-events: none;
            backdrop-filter: blur(3px);
            color: var(--text-light);
        }

    </style>
</head>
<body>
    <canvas class="matrix-bg" id="matrixCanvas"></canvas>
    <aside class="sidebar">
        <div class="logo"><h1>iNTRUDER</h1></div>
        <img id="topGif" class="top-gif-placeholder" src="/static/top.gif" alt="Top Decorative GIF">
        <div class="metric-card"><div class="metric-label">CPU</div><div class="metric-value" id="cpuUsage">0%</div></div>
        <div class="metric-card"><div class="metric-label">MEM</div><div class="metric-value" id="memUsage">0%</div></div>
        <div id="assistantPanel">
            <div class="assistant-header">
                <div class="avatar-container">
                    <img id="assistantAvatar" src="/static/astro_5.gif" alt="Assistant Avatar">
                </div>
                <div>
                    <div id="assistantName">Aztr0.B0T</div>
                    <div id="assistantStatus">Status: Standby</div>
                </div>
            </div>
            <div id="assistantLog"></div>
        </div>
        <img id="bottomGif" class="bottom-gif-placeholder" src="/static/bottom.gif" alt="Bottom Decorative GIF">
    </aside>
    <main class="main-content">
        <header class="header">
            <h1 class="header-title">Advanced Cyber-Security HUD</h1>
            <div id="scanIndicator" class="scan-indicator">SCANNING...</div>
        </header>
        <section class="control-grid">
            <div class="control-item"><label for="interfaceSelect">Wireless Interface</label><select id="interfaceSelect"></select></div>
            <div class="control-item"><label>&nbsp;</label><button id="monitorModeBtn">Enable Monitor Mode</button></div>
            <div class="control-item"><label for="channelInput">Target Channel (Optional)</label><input type="text" id="channelInput" placeholder="e.g., 6"></div>
            <div class="control-item"><label>&nbsp;</label><button id="scanBtn" disabled>Scan Networks</button></div>
        </section>
        <section class="metrics-row">
            <div class="metric-card"><div class="metric-label">NETWORKS</div><div class="metric-value" id="networksCount">0</div></div>
            <div class="metric-card"><div class="metric-label">CLIENTS</div><div class="metric-value" id="clientsCount">0</div></div>
            <div class="metric-card"><div class="metric-label">CAPTURES</div><div class="metric-value" id="handshakesCount">0</div></div>
            <div class="metric-card"><div class="metric-label">DEAUTHS</div><div class="metric-value" id="deauthCount">0</div></div>
            <div class="metric-card"><div class="metric-label">CRACKS</div><div class="metric-value" id="crackCount">0</div></div>
            <div class="metric-card metric-card-gif">
                <img src="/static/top2.gif" alt="Decorative GIF">
            </div>
        </section>

        <div class="section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 class="section-title" style="margin-bottom: 0;">LAN Security Audit</h2>
                <button id="lanScanBtn" style="width: 200px;">Scan Local Network</button>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>IP Address</th>
                            <th>MAC Address</th>
                            <th>Manufacturer</th>
                        </tr>
                    </thead>
                    <tbody id="lanHostsTableBody">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <h2 class="section-title">Live Network Matrix</h2>
            <div class="network-viz-container">
                <div class="hud-grid"></div>
                <div class="hud-scanline"></div>
                <canvas id="networkCanvas" class="network-canvas"></canvas>
            </div>
        </div>
        <div class="section">
            <h2 class="section-title">Network Detection Grid</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>PRIO</th>
                            <th>ESSID</th>
                            <th>BSSID</th>
                            <th>CH</th>
                            <th>PWR</th>
                            <th>CLIENTS</th>
                            <th>ENCRYPTION</th>
                            <th style="width: 150px;">ACTIONS</th>
                            <th style="width: 120px; text-align: center;">
                                <img src="/static/bottom6.gif" alt="Decorative GIF" style="height: 30px; vertical-align: middle;">
                            </th>
                        </tr>
                    </thead>
                    <tbody id="networksTableBody"></tbody>
                </table>
            </div>
        </div>
        <div class="section">
            <h2 class="section-title">Client Detection Grid</h2>
            <div class="table-container" style="max-height: 300px;">
                <table>
                    <thead><tr><th>MAC</th><th>MANUFACTURER</th><th>CONNECTED TO</th><th>OS INFO</th><th>HOSTNAME</th><th>PROBED ESSIDS</th><th>PWR</th><th>LAST SEEN</th></tr></thead>
                    <tbody id="clientsTableBody"></tbody>
                </table>
            </div>
        </div>
        <div class="section">
            <h2 class="section-title">Captured Artifacts</h2>
            <div class="table-container">
                <table>
                    <thead><tr><th>ESSID</th><th>BSSID</th><th>Type</th><th>File</th><th>Password</th>
                        <th style="width: 200px;">ACTIONS</th>
                    </tr></thead>
                    <tbody id="handshakesTableBody"></tbody>
                </table>
            </div>
        </div>
        <div class="section">
            <h2 class="section-title">System Output</h2>
            <div class="terminal-section" id="terminalOutput"></div>
        </div>
    </main>
    <div id="networkTooltip"></div>
    <div id="deauthModal" class="modal"><div class="modal-content"><div class="modal-header"><h2>Deauth Attack</h2><span class="close-modal">&times;</span></div><form id="deauthForm"><div class="form-group"><label>Target BSSID</label><input type="text" name="bssid" id="deauthBssid" readonly></div><div class="form-group"><label>Client MAC (optional)</label><input type="text" name="client" placeholder="ff:ff:ff:ff:ff:ff"></div><div class="form-group"><label>Packet Count</label><input type="number" name="count" value="10"></div><button type="submit">Launch Attack</button></form></div></div>
    <div id="crackModal" class="modal"><div class="modal-content"><div class="modal-header"><h2>Crack Handshake/PMKID</h2><span class="close-modal">&times;</span></div><form id="crackForm"><div class="form-group"><label>Artifact File</label><input type="text" name="file" id="crackFile" readonly></div><div class="form-group"><label>Wordlist Path</label><input type="text" name="wordlist" value="/usr/share/wordlists/rockyou.txt" required></div><button type="submit">Start Cracking</button></form></div></div>
    <script src="/static/dashboard.js"></script>
</body>
</html>